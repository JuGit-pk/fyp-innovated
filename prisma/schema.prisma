datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified Boolean   @default(false)
  image         String?
  password      String?
  accounts      Account[]
  Chat          Chat[]
}

model Chat {
  id          String     @id @default(cuid())
  name        String     @unique
  pdfLink     String
  pdfStoragePath  String
  collectionName String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  messages    Message[]
  user        User      @relation(fields: [userId], references: [id])
  userId      String
}
// {
//     "id": "pmGFMnJ",
//     "createdAt": "2024-04-08T06:49:52.928Z",
//     "content": "The provided context is related to vehicle application tracking and verification in Punjab, Pakistan. It includes details such as the application type (new registration), current status (in progress), information verification website (www.mtmis.excise.punjab.gov.pk), and the entities involved (Excise & Taxation Department and Punjab Information Technology Board). Additionally, specific vehicle information is provided, including registration number, owner details (PAK SUZUKI MOTOR CO LTD), payment details, vehicle details (make, engine number, registration date, year of manufacture, price, color), and token information (lifetime).",
//     "role": "assistant"
// }
model Message {
  id        String @id @default(cuid())
  createdAt DateTime @default(now())
  content   String
  role      Role  @default(user)
  chat      Chat   @relation(fields: [chatId], references: [id])
  chatId    String
}
enum Role {
  user
  assistant
  system
  tool
  function
  data
}